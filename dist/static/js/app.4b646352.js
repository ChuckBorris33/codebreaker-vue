(function(){"use strict";var e={690:function(e,t,n){n(384);var s=n(144),a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("GameView")],1)},i=[],r=function(){var e=this,t=e._self._c;return t("div",{ref:"game",staticClass:"Game"},[t("DragShadow"),t("GameHeader"),t(e.mainComponent,{tag:"Component"})],1)},o=[],u=n(629);const l={EXACT_MATCH:"EXACT_MATCH",COLOR_MATCH:"COLOR_MATCH",NO_MATCH:"NO_MATCH"},c={SETTINGS:"SETTINGS",GAME:"GAME",WON:"WON",LOST:"LOST",HELP:"HELP"},d=[{id:0,type:"PIN1"},{id:1,type:"PIN2"},{id:2,type:"PIN3"},{id:3,type:"PIN4"},{id:4,type:"PIN5"},{id:5,type:"PIN6"}];function p(e){const t=[...d],n=[];e.canBeEmpty&&t.push(void 0);for(let s=0;s<4;s++){const a=Math.floor(Math.random()*t.length);n[s]=t[a],e.canRepeat||t.splice(a,1)}return n}function m(e,t){const n=t.map((e=>e?e.id:void 0)),s=e.map((e=>e?e.id:void 0)),a=[l.NO_MATCH,l.NO_MATCH,l.NO_MATCH,l.NO_MATCH],i=e.length;for(let r=0;r<i;r++){const e=s[r];if(s[r]===n[r])n[r]=-1,a[r]=l.EXACT_MATCH;else if(n.some((t=>t===e))){const t=n.indexOf(e);n[t]=-1,a[t]=l.COLOR_MATCH}}return v(a),a}function g(e,t){const n=t.every((e=>e===l.EXACT_MATCH));return n?c.WON:e>=5?c.LOST:c.GAME}function v(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[n],e[n]=s}}var f,h,C=function(){var e=this,t=e._self._c;return t("div",{staticClass:"GameSettings"},[t("div",{staticClass:"GameSettings-checkbox"},[t("BaseCheckbox",{staticClass:"u-pb1",attrs:{id:"canRepeat",type:"checkbox",label:"Allow repeating pins"},model:{value:e.canRepeat,callback:function(t){e.canRepeat=t},expression:"canRepeat"}}),t("BaseCheckbox",{attrs:{id:"canRepeat",type:"checkbox",label:"Allow empty pins"},model:{value:e.canBeEmpty,callback:function(t){e.canBeEmpty=t},expression:"canBeEmpty"}})],1),t("BaseButton",{attrs:{label:"Start Game"},on:{click:function(t){return e.startGame({canRepeat:e.canRepeat,canBeEmpty:e.canBeEmpty})}}})],1)},G=[],_=function(){var e=this,t=e._self._c;return t("button",{staticClass:"BaseButton",on:{click:function(t){return e.$emit("click")}}},[e._v(" "+e._s(e.label)+" ")])},S=[],P={name:"BaseButton",props:{label:{type:String,required:!0}}},T=P,b=n(1),k=(0,b.Z)(T,_,S,!1,null,null,null),y=k.exports,O=function(){var e=this,t=e._self._c;return t("div",{staticClass:"BaseCheckbox"},[t("span",{staticClass:"BaseCheckbox-tick",class:{"BaseCheckbox-tick--active":e.value},on:{click:e.toggleValue}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{id:e.id,type:"hidden"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})]),t("label",[e._v(e._s(e.label))])])},w=[],B={name:"BaseCheckbox",props:{id:{type:String,required:!0},label:{type:String,required:!0},checked:{type:Boolean,default:!1}},data(){return{value:this.checked}},watch:{value(e,t){this.$emit("input",e)}},methods:{toggleValue(){this.value=!this.value}}},E=B,x=(0,b.Z)(E,O,w,!1,null,null,null),A=x.exports,H={name:"GameSettings",components:{BaseButton:y,BaseCheckbox:A},data(){return{canRepeat:!1,canBeEmpty:!1}},methods:{...(0,u.OI)(["startGame"])}},R=H,M=(0,b.Z)(R,C,G,!1,null,null,null),N=M.exports,I=function(){var e=this,t=e._self._c;return t("div",{staticClass:"GameHeader"},[t("span",{staticClass:"BackButton",class:{"u-hidden":!e.showBackButton},on:{click:e.backClicked}},[e._v(" <--- ")]),t("h1",{staticClass:"GameTitle"},[e._v(" codeBreaker_> ")]),t("span",{staticClass:"HelpButton",class:{"u-hidden":!e.showHelpButton},on:{click:e.helpClicked}},[e._v(" ? ")])])},L=[],Z={name:"GameHeader",computed:{...(0,u.rn)(["gameState"]),showBackButton(){return this.gameState!==c.SETTINGS},showHelpButton(){return this.gameState===c.GAME}},methods:{...(0,u.OI)(["setGameState"]),backClicked(){this.gameState===c.HELP?this.setGameState({gameState:c.GAME}):this.setGameState({gameState:c.SETTINGS})},helpClicked(){this.setGameState({gameState:c.HELP})}}},D=Z,z=(0,b.Z)(D,I,L,!1,null,null,null),$=z.exports,j=function(){var e=this,t=e._self._c;return t("div",{staticClass:"GameBoard"},[t("GuessList"),t("CurrentGuess"),t("PinOptions")],1)},q=[],X=function(){var e=this,t=e._self._c;return t("TransitionGroup",{staticClass:"GuessList",attrs:{tag:"div",name:"guesses"}},e._l(e.guesses,(function(n){return t("div",{key:n.id,staticClass:"GuessRow"},[e._l(n.guess,(function(e,n){return t("SimplePin",{key:n,staticClass:"GuessRow-guessPin",attrs:{pin:e}})})),t("div",{staticClass:"GuessRow-result"},e._l(n.result,(function(e,n){return t("ResultPin",{key:n,attrs:{result:e}})})),1)],2)})),0)},V=[],W=function(){var e=this,t=e._self._c;return t("div",{staticClass:"Pin",class:[e.sizeClass,e.colorClass]})},F=[],U={name:"SimplePin",props:{pin:{type:Object,required:!1,default:void 0}},data(){return{sizeClass:""}},computed:{colorClass(){return this.pin?`Pin--${this.pin.type}`:"Pin--empty"}}},Y=U,J=(0,b.Z)(Y,W,F,!1,null,null,null),K=J.exports,Q={name:"ResultPin",extends:K,props:{result:{type:String,required:!0}},data(){return{sizeClass:"Pin--small"}},computed:{colorClass(){return{[l.NO_MATCH]:"Pin--empty",[l.EXACT_MATCH]:"Pin--exactMatch",[l.COLOR_MATCH]:"Pin--colorMatch"}[this.result]}}},ee=Q,te=(0,b.Z)(ee,f,h,!1,null,null,null),ne=te.exports,se={name:"GuessList",components:{SimplePin:K,ResultPin:ne},computed:{...(0,u.rn)(["guesses"])}},ae=se,ie=(0,b.Z)(ae,X,V,!1,null,null,null),re=ie.exports,oe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"CurrentGuess"},[e._l(e.currentGuess,(function(e,n){return t("GuessPin",{key:n,attrs:{id:n,pin:e}})})),t("div",{staticClass:"CurrentGuess-testButton"},[t("BaseButton",{attrs:{label:"Test"},on:{click:e.testCode}})],1)],2)},ue=[],le=function(){var e=this,t=e._self._c;return t("div",{class:["Pin",e.colorClass,"Pin--dragable"],attrs:{draggable:"true"},on:{dragstart:function(t){return e.dragPin({pin:e.pin,dragType:"guess",event:t,guessId:e.id})},dragover:function(e){e.preventDefault()},drop:function(t){return t.preventDefault(),e.dropPin({guessId:e.id,targetType:"guess"})},dragend:e.dragEnd}})},ce=[],de={name:"GuessPin",extends:K,props:{id:{type:Number,required:!0}},methods:{...(0,u.OI)(["dragEnd"]),...(0,u.nv)(["dropPin","dragPin"])}},pe=de,me=(0,b.Z)(pe,le,ce,!1,null,null,null),ge=me.exports,ve={name:"CurrentGuess",components:{BaseButton:y,GuessPin:ge},computed:{...(0,u.rn)(["currentGuess"])},methods:{...(0,u.nv)(["testCode"])}},fe=ve,he=(0,b.Z)(fe,oe,ue,!1,null,null,null),Ce=he.exports,Ge=function(){var e=this,t=e._self._c;return t("div",{staticClass:"PinOptions"},e._l(e.pins,(function(e,n){return t("OptionPin",{key:n,attrs:{id:n,pin:e}})})),1)},_e=[],Se=function(){var e=this,t=e._self._c;return t("div",{class:["Pin",e.colorClass,"Pin--dragable"],attrs:{draggable:"true"},on:{dragstart:function(t){return e.dragPin({pin:e.pin,dragType:"options",event:t})},dragend:e.dragEnd}})},Pe=[],Te={name:"OptionPin",extends:K,props:{id:{type:Number,required:!0}},methods:{...(0,u.OI)(["dragEnd"]),...(0,u.nv)(["dragPin"])}},be=Te,ke=(0,b.Z)(be,Se,Pe,!1,null,null,null),ye=ke.exports,Oe={name:"PinOptions",components:{OptionPin:ye},data(){return{pins:d}}},we=Oe,Be=(0,b.Z)(we,Ge,_e,!1,null,null,null),Ee=Be.exports,xe={name:"GameBoard",components:{GuessList:re,CurrentGuess:Ce,PinOptions:Ee}},Ae=xe,He=(0,b.Z)(Ae,j,q,!1,null,null,null),Re=He.exports,Me=function(){var e=this,t=e._self._c;return t("div",{staticClass:"GameEnd"},[t("div",{staticClass:"GameEnd-resultText"},[e._v(" "+e._s(e.resultText)+" ")]),t("div",{staticClass:"GameEnd-resultCode"},[e.isGameLost?[t("p",[e._v("Last guess")]),t("div",{staticClass:"GameEnd-code"},e._l(e.currentGuess,(function(e,n){return t("SimplePin",{key:n,attrs:{pin:e}})})),1)]:e._e(),t("p",[e._v("Code is")]),t("div",{staticClass:"GameEnd-code"},e._l(e.code,(function(e,n){return t("SimplePin",{key:n,attrs:{pin:e}})})),1),t("BaseButton",{staticClass:"GameEnd-backButton",attrs:{label:"Back"},on:{click:function(t){return e.backToSettings()}}})],2)])},Ne=[],Ie={name:"GameEnd",components:{SimplePin:K,BaseButton:y},computed:{...(0,u.rn)(["gameState","code","currentGuess"]),resultText(){return this.isGameLost?"GAME OVER":"YOU WON"},isGameLost(){return this.gameState===c.LOST}},methods:{...(0,u.OI)(["setGameState"]),backToSettings(){this.setGameState({gameState:c.SETTINGS})}}},Le=Ie,Ze=(0,b.Z)(Le,Me,Ne,!1,null,null,null),De=Ze.exports,ze=function(){var e=this,t=e._self._c;return t("div",{staticClass:"GameHelp"},[t("p",{staticClass:"u-nomargin"},[e._v(" Try to guess right pin combination ")]),t("ol",[t("li",[e._v(" Drag pins "),t("SimplePin",{staticClass:"u-inline Pin--fontSize",attrs:{pin:e.pins[0]}}),e._v(" and drop them in slots "),t("SimplePin",{staticClass:"u-inline Pin--fontSize",attrs:{pin:null}})],1),t("li",[e._v(" Click on Test button "),t("BaseButton",{staticClass:"u-cursorNormal u-inline",attrs:{label:"Test"}})],1),t("li",[e._v(" Result will show up. ")])]),t("div",{staticClass:"GuessRow HelpGuessRow"},[e._l(e.exampleGuess,(function(e,n){return t("SimplePin",{key:n,staticClass:"GuessRow-guessPin",attrs:{pin:e}})})),t("div",{staticClass:"GuessRow-result"},e._l(e.exampleResult,(function(e,n){return t("ResultPin",{key:n,attrs:{result:e}})})),1)],2),t("p",[e._v(" White pin "),t("ResultPin",{staticClass:"u-inline Pin--fontSize",attrs:{result:e.ResultType.COLOR_MATCH}}),e._v(" means right color but wrong placement. ")],1),t("p",[e._v(" Black pin "),t("ResultPin",{staticClass:"u-inline Pin--fontSize",attrs:{result:e.ResultType.EXACT_MATCH}}),e._v(" means right color and right placement. ")],1),t("p",[e._v("Result pins are scrambled")])])},$e=[],je={name:"GameHelp",components:{SimplePin:K,ResultPin:ne,BaseButton:y},data(){return{pins:d,ResultType:l,exampleResult:[l.NO_MATCH,l.EXACT_MATCH,l.NO_MATCH,l.COLOR_MATCH]}},computed:{exampleGuess(){return d.slice(0,4)}}},qe=je,Xe=(0,b.Z)(qe,ze,$e,!1,null,null,null),Ve=Xe.exports,We=function(){var e=this,t=e._self._c;return t("div",{ref:"dragShadow",attrs:{id:"DragShadow"}},[e.dragData?t("SimplePin",{attrs:{pin:e.dragData.pin}}):e._e()],1)},Fe=[],Ue={name:"DragShadow",components:{SimplePin:K},computed:{...(0,u.rn)(["dragData"])},watch:{dragData(e){if(e){const t=this.$refs.dragShadow;e.event.dataTransfer.setDragImage(t,10,10)}}}},Ye=Ue,Je=(0,b.Z)(Ye,We,Fe,!1,null,null,null),Ke=Je.exports,Qe={name:"GameView",components:{GameSettings:N,GameHeader:$,GameBoard:Re,GameEnd:De,GameHelp:Ve,DragShadow:Ke},computed:{...(0,u.rn)(["gameState"]),mainComponent(){switch(this.gameState){case c.GAME:return Re;case c.SETTINGS:return N;case c.HELP:return Ve;case c.LOST:case c.WON:return De}}},mounted(){screen.orientation.lock("landscape"),this.$refs.game.style=`max-width: ${.5625*window.innerHeight}px`,window.addEventListener("resize",(()=>{this.$refs.game.style=`max-width: ${.5625*window.innerHeight}px`}))}},et=Qe,tt=(0,b.Z)(et,r,o,!1,null,null,null),nt=tt.exports,st={name:"App",components:{GameView:nt}},at=st,it=(0,b.Z)(at,a,i,!1,null,null,null),rt=it.exports,ot=n(632);const ut={startGame(e,t){const n=p({canRepeat:t.canRepeat,canBeEmpty:t.canBeEmpty});e.gameState=c.GAME,e.code=n,e.guesses=[],e.currentGuess=[void 0,void 0,void 0,void 0]},guessPin(e,t){s.ZP.set(e.currentGuess,t.guessId,t.pin)},removePin(e,t){s.ZP.set(e.currentGuess,t.guessId,void 0)},addGuess(e,t){e.guesses=[...e.guesses,{guess:e.currentGuess,result:t.result,id:(0,ot.Z)()}],e.currentGuess=[void 0,void 0,void 0,void 0]},setGameState(e,t){e.gameState=t.gameState},dragStart(e,t){e.dragData=t},dragEnd(e){e.dragData=void 0}};var lt=ut;const ct={testCode({commit:e,state:t}){const n=m(t.currentGuess,t.code),s=g(t.guesses.length,n);s===c.GAME?e("addGuess",{result:n}):s!==t.gameState&&e("setGameState",{gameState:s})},dropPin({commit:e,state:t},n){if("guess"===t.dragData.dragType){const s=t.currentGuess[n.guessId];e("guessPin",{pin:s,guessId:t.dragData.guessId})}e("guessPin",{pin:t.dragData.pin,guessId:n.guessId})},dragPin({commit:e,state:t},n){"guess"===n.dragType&&e("removePin",{guessId:n.guessId}),e("dragStart",n)}};var dt=ct;s.ZP.use(u.ZP);const pt=!1;var mt=new u.ZP.Store({state:{gameState:c.SETTINGS,code:[],guesses:[],currentGuess:[void 0,void 0,void 0,void 0],dragData:void 0},mutations:lt,actions:dt,strict:pt}),gt=n(205);(0,gt.z)("/service-worker.js",{ready(){console.debug("App is being served from cache by a service worker.")},registered(){console.debug("Service worker has been registered.")},cached(){console.debug("Content has been cached for offline use.")},updatefound(){console.debug("New content is downloading.")},updated(){console.debug("New content is available; please refresh.")},offline(){console.debug("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),s.ZP.config.productionTip=!1,new s.ZP({store:mt,render:e=>e(rt)}).$mount("#app")}},t={};function n(s){var a=t[s];if(void 0!==a)return a.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,s,a,i){if(!s){var r=1/0;for(c=0;c<e.length;c++){s=e[c][0],a=e[c][1],i=e[c][2];for(var o=!0,u=0;u<s.length;u++)(!1&i||r>=i)&&Object.keys(n.O).every((function(e){return n.O[e](s[u])}))?s.splice(u--,1):(o=!1,i<r&&(r=i));if(o){e.splice(c--,1);var l=a();void 0!==l&&(t=l)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[s,a,i]}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,i,r=s[0],o=s[1],u=s[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(u)var c=u(n)}for(t&&t(s);l<r.length;l++)i=r[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},s=self["webpackChunkcodebreaker_vue"]=self["webpackChunkcodebreaker_vue"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(690)}));s=n.O(s)})();
//# sourceMappingURL=app.4b646352.js.map