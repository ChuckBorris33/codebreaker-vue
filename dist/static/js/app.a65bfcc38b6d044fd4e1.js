webpackJsonp([1],{"/33h":function(e,t){},"0V7v":function(e,t){},"4ncx":function(e,t){},"9PLy":function(e,t){},"9aVz":function(e,t){},"D+4k":function(e,t){},EuUu:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("35qG");var s=n("7+uW"),a=n("NYxO"),i=n("Gu7T"),r=n.n(i),u={EXACT_MATCH:"EXACT_MATCH",COLOR_MATCH:"COLOR_MATCH",NO_MATCH:"NO_MATCH"},c={SETTINGS:"SETTINGS",GAME:"GAME",WON:"WON",LOST:"LOST",HELP:"HELP"},o=[{id:0,type:"PIN1"},{id:1,type:"PIN2"},{id:2,type:"PIN3"},{id:3,type:"PIN4"},{id:4,type:"PIN5"},{id:5,type:"PIN6"}];function l(e,t){for(var n=t.map(function(e){return e?e.id:void 0}),s=e.map(function(e){return e?e.id:void 0}),a=[u.NO_MATCH,u.NO_MATCH,u.NO_MATCH,u.NO_MATCH],i=e.length,r=function(e){var t=s[e];if(s[e]===n[e])n[e]=-1,a[e]=u.EXACT_MATCH;else if(n.some(function(e){return e===t})){var i=n.indexOf(t);n[i]=-1,a[i]=u.COLOR_MATCH}},c=0;c<i;c++)r(c);return function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[n],e[n]=s}}(a),a}var d={startGame:function(e,t){var n=function(e){var t=[].concat(o),n=[];e.canBeEmpty&&t.push(void 0);for(var s=0;s<4;s++){var a=Math.floor(Math.random()*t.length);n[s]=t[a],e.canRepeat||t.splice(a,1)}return n}({canRepeat:t.canRepeat,canBeEmpty:t.canBeEmpty});e.gameState=c.GAME,e.code=n,e.guesses=[],e.currentGuess=[void 0,void 0,void 0,void 0]},guessPin:function(e,t){s.a.set(e.currentGuess,t.guessId,t.pin)},removePin:function(e,t){s.a.set(e.currentGuess,t.guessId,void 0)},addGuess:function(e,t){e.guesses=[].concat(r()(e.guesses),[{guess:e.currentGuess,result:t.result}]),e.currentGuess=[void 0,void 0,void 0,void 0]},setGameState:function(e,t){e.gameState=t.gameState},dragStart:function(e,t){e.dragData=t},dragEnd:function(e){e.dragData=void 0}},p={testCode:function(e){var t,n=e.commit,s=e.state,a=l(s.currentGuess,s.code),i=(t=s.guesses.length,a.every(function(e){return e===u.EXACT_MATCH})?c.WON:t>=5?c.LOST:c.GAME);i===c.GAME?n("addGuess",{result:a}):i!==s.gameState&&n("setGameState",{gameState:i})},dropPin:function(e,t){var n=e.commit,s=e.state;"guess"===s.dragData.dragType&&n("guessPin",{pin:s.currentGuess[t.guessId],guessId:s.dragData.guessId});n("guessPin",{pin:s.dragData.pin,guessId:t.guessId})},dragPin:function(e,t){var n=e.commit;e.state;"guess"===t.dragType&&n("removePin",{guessId:t.guessId}),n("dragStart",t)}};s.a.use(a.a);var m=new a.a.Store({state:{gameState:c.SETTINGS,code:[],guesses:[],currentGuess:[void 0,void 0,void 0,void 0],dragData:void 0},mutations:d,actions:p,strict:!1}),v=n("Dd8w"),f=n.n(v),g={name:"BaseButton",props:{label:{type:String,required:!0}}},h={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{staticClass:"BaseButton",on:{click:function(t){e.$emit("click")}}},[e._v("\n  "+e._s(e.label)+"\n")])},staticRenderFns:[]};var _=n("VU/8")(g,h,!1,function(e){n("/33h")},null,null).exports,C={name:"BaseCheckbox",props:{id:{type:String,required:!0},label:{type:String,required:!0},checked:{type:Boolean,default:!1}},data:function(){return{value:this.checked}},watch:{value:function(e,t){this.$emit("input",e)}},methods:{toggleValue:function(){this.value=!this.value}}},G={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"BaseCheckbox"},[n("span",{staticClass:"BaseCheckbox-tick",class:{"BaseCheckbox-tick--active":e.value},on:{click:e.toggleValue}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{id:e.id,type:"hidden"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})]),e._v(" "),n("label",[e._v(e._s(e.label))])])},staticRenderFns:[]};var S={name:"GameSettings",components:{BaseButton:_,BaseCheckbox:n("VU/8")(C,G,!1,function(e){n("RisY")},null,null).exports},data:function(){return{canRepeat:!1,canBeEmpty:!1}},methods:f()({},Object(a.c)(["startGame"]))},P={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"GameSettings"},[n("div",{staticClass:"GameSettings-checkbox"},[n("BaseCheckbox",{staticClass:"u-pb1",attrs:{id:"canRepeat",type:"checkbox",label:"Allow repeating pins"},model:{value:e.canRepeat,callback:function(t){e.canRepeat=t},expression:"canRepeat"}}),e._v(" "),n("BaseCheckbox",{attrs:{id:"canRepeat",type:"checkbox",label:"Allow empty pins"},model:{value:e.canBeEmpty,callback:function(t){e.canBeEmpty=t},expression:"canBeEmpty"}})],1),e._v(" "),n("BaseButton",{attrs:{label:"Start Game"},on:{click:function(t){e.startGame({canRepeat:e.canRepeat,canBeEmpty:e.canBeEmpty})}}})],1)},staticRenderFns:[]};var E=n("VU/8")(S,P,!1,function(e){n("dsx0")},null,null).exports,T={name:"GameHeader",computed:f()({},Object(a.d)(["gameState"]),{showBackButton:function(){return this.gameState!==c.SETTINGS},showHelpButton:function(){return this.gameState===c.GAME}}),methods:f()({},Object(a.c)(["setGameState"]),{backClicked:function(){this.gameState===c.HELP?this.setGameState({gameState:c.GAME}):this.setGameState({gameState:c.SETTINGS})},helpClicked:function(){this.setGameState({gameState:c.HELP})}})},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"GameHeader"},[n("span",{staticClass:"BackButton",class:{"u-hidden":!e.showBackButton},on:{click:e.backClicked}},[e._v("\n    <---\n  ")]),e._v(" "),n("h1",{staticClass:"GameTitle"},[e._v("\n    codeBreaker_>\n  ")]),e._v(" "),n("span",{staticClass:"HelpButton",class:{"u-hidden":!e.showHelpButton},on:{click:e.helpClicked}},[e._v("\n    ?\n  ")])])},staticRenderFns:[]};var O=n("VU/8")(T,b,!1,function(e){n("0V7v")},null,null).exports,R={name:"SimplePin",props:{pin:{type:Object,required:!1,default:void 0}},data:function(){return{sizeClass:""}},computed:{colorClass:function(){return this.pin?"Pin--"+this.pin.type:"Pin--empty"}}},y={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"Pin",class:[this.sizeClass,this.colorClass]})},staticRenderFns:[]};var B=n("VU/8")(R,y,!1,function(e){n("4ncx")},null,null).exports,k=n("bOdI"),x=n.n(k),A={name:"ResultPin",extends:B,props:{result:{type:String,required:!0}},data:function(){return{sizeClass:"Pin--small"}},computed:{colorClass:function(){var e;return(e={},x()(e,u.NO_MATCH,"Pin--empty"),x()(e,u.EXACT_MATCH,"Pin--exactMatch"),x()(e,u.COLOR_MATCH,"Pin--colorMatch"),e)[this.result]}}};var H=n("VU/8")(A,null,!1,function(e){n("rh2+")},null,null).exports,w={name:"GuessList",components:{SimplePin:B,ResultPin:H},computed:f()({},Object(a.d)(["guesses"]))},M={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition-group",{staticClass:"GuessList",attrs:{tag:"div",name:"guesses"}},e._l(e.guesses,function(t,s){return n("div",{key:s,staticClass:"GuessRow"},[e._l(t.guess,function(e,t){return n("SimplePin",{key:t,staticClass:"GuessRow-guessPin",attrs:{pin:e}})}),e._v(" "),n("div",{staticClass:"GuessRow-result"},e._l(t.result,function(e,t){return n("ResultPin",{key:t,attrs:{result:e}})}))],2)}))},staticRenderFns:[]};var N=n("VU/8")(w,M,!1,function(e){n("Y95Z")},null,null).exports,L={name:"GuessPin",extends:B,props:{id:{type:Number,required:!0}},methods:f()({},Object(a.c)(["dragEnd"]),Object(a.b)(["dropPin","dragPin"]))},I={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:["Pin",e.colorClass,"Pin--dragable"],attrs:{draggable:"true"},on:{dragstart:function(t){e.dragPin({pin:e.pin,dragType:"guess",event:t,guessId:e.id})},dragover:function(e){e.preventDefault()},drop:function(t){t.preventDefault(),e.dropPin({guessId:e.id,targetType:"guess"})},dragend:e.dragEnd}})},staticRenderFns:[]},V={name:"CurrentGuess",components:{BaseButton:_,GuessPin:n("VU/8")(L,I,!1,null,null,null).exports},computed:f()({},Object(a.d)(["currentGuess"])),methods:f()({},Object(a.b)(["testCode"]))},D={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"CurrentGuess"},[this._l(this.currentGuess,function(e,n){return t("GuessPin",{key:n,attrs:{pin:e,id:n}})}),this._v(" "),t("div",{staticClass:"CurrentGuess-testButton"},[t("BaseButton",{attrs:{label:"Test"},on:{click:this.testCode}})],1)],2)},staticRenderFns:[]};var $=n("VU/8")(V,D,!1,function(e){n("xiz/")},null,null).exports,U={name:"OptionPin",extends:B,props:{id:{type:Number,required:!0}},methods:f()({},Object(a.c)(["dragEnd"]),Object(a.b)(["dragPin"]))},j={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:["Pin",e.colorClass,"Pin--dragable"],attrs:{draggable:"true"},on:{dragstart:function(t){e.dragPin({pin:e.pin,dragType:"options",event:t})},dragend:e.dragEnd}})},staticRenderFns:[]},F={name:"PinOptions",components:{OptionPin:n("VU/8")(U,j,!1,null,null,null).exports},data:function(){return{pins:o}}},z={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"PinOptions"},this._l(this.pins,function(e,n){return t("OptionPin",{key:n,attrs:{id:n,pin:e}})}))},staticRenderFns:[]};var X={name:"GameBoard",components:{GuessList:N,CurrentGuess:$,PinOptions:n("VU/8")(F,z,!1,function(e){n("EuUu")},null,null).exports}},q={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"GameBoard"},[t("GuessList"),this._v(" "),t("CurrentGuess"),this._v(" "),t("PinOptions")],1)},staticRenderFns:[]};var W=n("VU/8")(X,q,!1,function(e){n("D+4k")},null,null).exports,Y={name:"GameEnd",components:{SimplePin:B,BaseButton:_},computed:f()({},Object(a.d)(["gameState","code","currentGuess"]),{resultText:function(){switch(this.gameState){case c.WON:return"YOU WON";case c.LOST:return"GAME OVER"}},isGameLost:function(){return this.gameState===c.LOST}}),methods:f()({},Object(a.c)(["setGameState"]),{backToSettings:function(){this.setGameState({gameState:c.SETTINGS})}})},K={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"GameEnd"},[n("div",{staticClass:"GameEnd-resultText"},[e._v(e._s(e.resultText))]),e._v(" "),n("div",{staticClass:"GameEnd-resultCode"},[e.isGameLost?[n("p",[e._v("Last guess")]),e._v(" "),n("div",{staticClass:"GameEnd-code"},e._l(e.currentGuess,function(e,t){return n("SimplePin",{key:t,attrs:{pin:e}})}))]:e._e(),e._v(" "),n("p",[e._v("Code is")]),e._v(" "),n("div",{staticClass:"GameEnd-code"},e._l(e.code,function(e,t){return n("SimplePin",{key:t,attrs:{pin:e}})})),e._v(" "),n("BaseButton",{staticClass:"GameEnd-backButton",attrs:{label:"Back"},on:{click:function(t){e.backToSettings()}}})],2)])},staticRenderFns:[]};var Z=n("VU/8")(Y,K,!1,function(e){n("gXAe")},null,null).exports,J={name:"GameHelp",components:{SimplePin:B,ResultPin:H,BaseButton:_},data:function(){return{pins:o,ResultType:u,exampleResult:[u.NO_MATCH,u.EXACT_MATCH,u.NO_MATCH,u.COLOR_MATCH]}},computed:{exampleGuess:function(){return o.slice(0,4)}}},Q={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"GameHelp"},[n("p",{staticClass:"u-nomargin"},[e._v("Try to guess right pin combination ")]),e._v(" "),n("ol",[n("li",[e._v("\n      Drag pins\n      "),n("SimplePin",{staticClass:"u-inline Pin--fontSize",attrs:{pin:e.pins[0]}}),e._v("\n      and drop them in slots\n      "),n("SimplePin",{staticClass:"u-inline Pin--fontSize",attrs:{pin:null}})],1),e._v(" "),n("li",[e._v("Click on Test button\n      "),n("BaseButton",{staticClass:"u-cursorNormal u-inline",attrs:{label:"Test"}})],1),e._v(" "),n("li",[e._v("\n      Result will show up.\n    ")])]),e._v(" "),n("div",{staticClass:"GuessRow HelpGuessRow"},[e._l(e.exampleGuess,function(e,t){return n("SimplePin",{key:t,staticClass:"GuessRow-guessPin",attrs:{pin:e}})}),e._v(" "),n("div",{staticClass:"GuessRow-result"},e._l(e.exampleResult,function(e,t){return n("ResultPin",{key:t,attrs:{result:e}})}))],2),e._v(" "),n("p",[e._v("\n    White pin\n    "),n("ResultPin",{staticClass:"u-inline Pin--fontSize",attrs:{result:e.ResultType.COLOR_MATCH}}),e._v("\n    means right color but wrong placement.\n  ")],1),e._v(" "),n("p",[e._v("\n    Black pin\n    "),n("ResultPin",{staticClass:"u-inline Pin--fontSize",attrs:{result:e.ResultType.EXACT_MATCH}}),e._v("\n    means right color and right placement.\n  ")],1),e._v(" "),n("p",[e._v("Result pins are scrambled")])])},staticRenderFns:[]};var ee=n("VU/8")(J,Q,!1,function(e){n("eHAK")},null,null).exports,te={name:"DragShadow",components:{SimplePin:B},computed:f()({},Object(a.d)(["dragData"])),watch:{dragData:function(e){if(e){var t=this.$refs.dragShadow;e.event.dataTransfer.setDragImage(t,10,10)}}}},ne={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"dragShadow",attrs:{id:"DragShadow"}},[this.dragData?t("SimplePin",{attrs:{pin:this.dragData.pin}}):this._e()],1)},staticRenderFns:[]};var se=n("VU/8")(te,ne,!1,function(e){n("9aVz")},null,null).exports,ae={name:"Game",components:{GameSettings:E,GameHeader:O,GameBoard:W,GameEnd:Z,GameHelp:ee,DragShadow:se},computed:f()({},Object(a.d)(["gameState"]),{mainComponent:function(){switch(this.gameState){case c.GAME:return W;case c.SETTINGS:return E;case c.HELP:return ee;case c.LOST:case c.WON:return Z}}}),mounted:function(){var e=this;screen.orientation.lock("landscape"),this.$refs.game.style="max-width: "+.5625*window.innerHeight+"px",window.addEventListener("resize",function(){e.$refs.game.style="max-width: "+.5625*window.innerHeight+"px"})}},ie={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"game",staticClass:"Game"},[t("DragShadow"),this._v(" "),t("GameHeader"),this._v(" "),t(this.mainComponent,{tag:"component"})],1)},staticRenderFns:[]};var re={name:"App",store:m,components:{Game:n("VU/8")(ae,ie,!1,function(e){n("cata")},null,null).exports}},ue={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("Game")],1)},staticRenderFns:[]};var ce=n("VU/8")(re,ue,!1,function(e){n("9PLy")},null,null).exports;new s.a({el:"#app",store:m,components:{App:ce},template:"<App/>"})},RisY:function(e,t){},Y95Z:function(e,t){},cata:function(e,t){},dsx0:function(e,t){},eHAK:function(e,t){},gXAe:function(e,t){},"rh2+":function(e,t){},"xiz/":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.a65bfcc38b6d044fd4e1.js.map